import router from '@ohos.router'

/**
 * ArkTS è¯­æ³•ä¸ TypeScript å¯¹æ¯”æ¼”ç¤º
 *
 * æ ¸å¿ƒåŒºåˆ«ï¼š
 * 1. struct å®šä¹‰ç»„ä»¶ vs class/function
 * 2. è£…é¥°å™¨ç³»ç»Ÿ
 * 3. build() æ–¹æ³•è¿”å› UI
 * 4. æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
 */

// ==================== 1. struct vs class å¯¹æ¯” ====================

// TypeScript å†™æ³•ï¼ˆReact é£æ ¼ï¼‰
/*
class UserComponent extends React.Component {
  state = { name: 'å¼ ä¸‰' }

  render() {
    return <div>{this.state.name}</div>
  }
}
*/

// ArkTS å†™æ³• - ä½¿ç”¨ struct
@Entry
@Component
struct ArkTSSyntaxDemo {
  // çŠ¶æ€å˜é‡
  @State userName: string = 'å¼ ä¸‰'
  @State showDetails: boolean = false

  build() {
    Scroll() {
      Column({ space: 16 }) {
        // æ ‡é¢˜
        this.HeaderSection()

        // struct vs class å¯¹æ¯”
        this.StructVsClassSection()

        // è£…é¥°å™¨ç³»ç»Ÿ
        this.DecoratorSection()

        // ç±»å‹ç³»ç»Ÿ
        this.TypeSystemSection()

        // å‡½æ•°å¯¹æ¯”
        this.FunctionSection()

        // ä»£ç å¯¹æ¯”
        this.CodeComparisonSection()
      }
      .width('100%')
      .padding({ left: 16, right: 16, top: 20, bottom: 20 })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
  }

  @Builder
  HeaderSection() {
    Column({ space: 8 }) {
      Text('ArkTS vs TypeScript è¯­æ³•å¯¹æ¯”')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)

      Text('ArkTS æ˜¯ TypeScript çš„ä¸¥æ ¼è¶…é›†ï¼Œä¸“é—¨ä¸ºé¸¿è’™ UI è®¾è®¡')
        .fontSize(14)
        .fontColor('#666')
    }
    .width('100%')
  }

  // ==================== struct vs class å¯¹æ¯” ====================
  @Builder
  StructVsClassSection() {
    Column({ space: 12 }) {
      Text('1ï¸âƒ£ struct vs class')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)

      Column({ space: 8 }) {
        this.ComparisonItem(
          'TypeScript - class',
          `class MyClass {
  name: string = 'test'

  render() {
    return <div>{this.name}</div>
  }
}`
        )

        this.ComparisonItem(
          'ArkTS - struct',
          `@Component
struct MyStruct {
  @State name: string = 'test'

  build() {
    Text(this.name)
  }
}`
        )
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
  }

  // ==================== è£…é¥°å™¨ç³»ç»Ÿ ====================
  @Builder
  DecoratorSection() {
    Column({ space: 12 }) {
      Text('2ï¸âƒ£ è£…é¥°å™¨ç³»ç»Ÿ')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)

      Column({ space: 8 }) {
        this.DecoratorItem('@Entry', 'é¡µé¢å…¥å£æ ‡è®°ï¼Œä¸€ä¸ªé¡µé¢åªèƒ½æœ‰ä¸€ä¸ª')
        this.DecoratorItem('@Component', 'ç»„ä»¶æ ‡è®°ï¼Œå£°æ˜è¿™æ˜¯ä¸€ä¸ª UI ç»„ä»¶')
        this.DecoratorItem('@State', 'ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œä¿®æ”¹ä¼šè§¦å‘ UI æ›´æ–°')
        this.DecoratorItem('@Prop', 'çˆ¶â†’å­å•å‘æ•°æ®ä¼ é€’')
        this.DecoratorItem('@Link', 'çˆ¶å­åŒå‘æ•°æ®ç»‘å®š')
        this.DecoratorItem('@Builder', 'è‡ªå®šä¹‰æ„å»ºå‡½æ•°')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
  }

  @Builder
  DecoratorItem(name: string, desc: string) {
    Row({ space: 12 }) {
      Text(name)
        .fontSize(14)
        .fontWeight(FontWeight.Medium)
        .fontColor('#007DFF')
        .width(100)

      Text(desc)
        .fontSize(13)
        .fontColor('#666')
        .layoutWeight(1)
    }
    .width('100%')
    .padding(8)
    .backgroundColor('#F8F8F8')
    .borderRadius(6)
  }

  // ==================== ç±»å‹ç³»ç»Ÿå¯¹æ¯” ====================
  @Builder
  TypeSystemSection() {
    Column({ space: 12 }) {
      Text('3ï¸âƒ£ ç±»å‹ç³»ç»ŸåŒºåˆ«')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)

      Column({ space: 8 }) {
        this.TypeItem('âŒ ä¸æ”¯æŒ', 'å¯¹è±¡å­—é¢é‡ç±»å‹', `let item: { name: string }`)

        this.TypeItem('âŒ ä¸æ”¯æŒ', 'å±•å¼€è¿ç®—ç¬¦', `const arr = [...array]`)

        this.TypeItem('âŒ ä¸æ”¯æŒ', 'any ç±»å‹', `let data: any`)

        this.TypeItem('âœ… å¿…é¡»ä½¿ç”¨', 'interface å®šä¹‰ç±»å‹', `interface Item { name: string }`)

        this.TypeItem('âœ… å¿…é¡»ä½¿ç”¨', 'å¾ªç¯å¤åˆ¶æ•°ç»„', `for (let i = 0; i < arr.length; i++)`)
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
  }

  @Builder
  TypeItem(tag: string, title: string, code: string) {
    Row({ space: 8 }) {
      Text(tag)
        .fontSize(11)
        .width(60)

      Text(title)
        .fontSize(13)
        .width(100)

      Text(code)
        .fontSize(11)
        .fontFamily('monospace')
        .fontColor('#722ED1')
        .layoutWeight(1)
    }
    .width('100%')
    .padding(6)
    .backgroundColor('#F8F8F8')
    .borderRadius(4)
  }

  // ==================== å‡½æ•°å¯¹æ¯” ====================
  @Builder
  FunctionSection() {
    Column({ space: 12 }) {
      Text('4ï¸âƒ£ å‡½æ•°å¯¹æ¯”')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)

      Column({ space: 12 }) {
        // TypeScript é£æ ¼
        Column({ space: 8 }) {
          Text('TypeScript - æ™®é€šå‡½æ•°')
            .fontSize(14)
            .fontColor('#666')

          Text(`function getUserName(): string {
  return 'å¼ ä¸‰'
}

const user = getUserName()`)
            .fontSize(11)
            .fontFamily('monospace')
            .width('100%')
            .padding(10)
            .backgroundColor('#F8F8F8')
            .borderRadius(6)
        }

        // ArkTS @Builder é£æ ¼
        Column({ space: 8 }) {
          Text('ArkTS - @Builder æ„å»ºå‡½æ•°')
            .fontSize(14)
            .fontColor('#007DFF')

          Text(`@Builder
function UserNameCard(name: string) {
  Text(name)
    .fontSize(16)
}

// ä½¿ç”¨
this.UserNameCard('å¼ ä¸‰')`)
            .fontSize(11)
            .fontFamily('monospace')
            .width('100%')
            .padding(10)
            .backgroundColor('#E6F7FF')
            .borderRadius(6)
        }
      }

      this.TipText('ğŸ’¡ @Builder åªèƒ½åŒ…å« UI ç»„ä»¶è¯­æ³•ï¼Œä¸èƒ½å†™æ™®é€š TypeScript ä»£ç ')
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
  }

  // ==================== ä»£ç å¯¹æ¯” ====================
  @Builder
  CodeComparisonSection() {
    Column({ space: 12 }) {
      Text('5ï¸âƒ£ å®é™…ä»£ç å¯¹æ¯”')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)

      // è®¡æ•°å™¨å¯¹æ¯”
      Column({ space: 12 }) {
        Text('è®¡æ•°å™¨ç»„ä»¶å¯¹æ¯”')
          .fontSize(16)
          .fontColor('#666')

        // React/TS
        Column({ space: 8 }) {
          Text('React + TypeScript')
            .fontSize(13)
            .fontWeight(FontWeight.Medium)

          Text(`function Counter() {
  const [count, setCount] = useState(0)

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() =>
        setCount(count + 1)
      }>
        +1
      </button>
    </div>
  )
}`)
            .fontSize(10)
            .fontFamily('monospace')
            .width('100%')
            .padding(10)
            .backgroundColor('#F8F8F8')
            .borderRadius(6)
        }

        // ArkTS
        Column({ space: 8 }) {
          Text('ArkTS')
            .fontSize(13)
            .fontWeight(FontWeight.Medium)
            .fontColor('#007DFF')

          Text(`@Component
struct Counter {
  @State count: number = 0

  build() {
    Column() {
      Text(\`Count: \${this.count}\`)
      Button('+1')
        .onClick(() => {
          this.count++
        })
    }
  }
}`)
            .fontSize(10)
            .fontFamily('monospace')
            .width('100%')
            .padding(10)
            .backgroundColor('#E6F7FF')
            .borderRadius(6)
        }
      }

      // å…³é”®åŒºåˆ«æ€»ç»“
      Column({ space: 8 }) {
        Text('ğŸ“Œ å…³é”®åŒºåˆ«æ€»ç»“')
          .fontSize(16)
          .fontWeight(FontWeight.Bold)

        Column({ space: 6 }) {
          this.SummaryItem('struct', 'å€¼ç±»å‹ï¼Œæ›´é«˜æ•ˆï¼Œæ— ç»§æ‰¿')
          this.SummaryItem('build()', 'å£°æ˜å¼ UIï¼Œç±»ä¼¼ JSX ä½†æ›´ç®€æ´')
          this.SummaryItem('è£…é¥°å™¨', '@State/@Prop ç­‰ç®¡ç†å“åº”å¼çŠ¶æ€')
          this.SummaryItem('this', 'è®¿é—®æˆå‘˜ç›´æ¥ç”¨ thisï¼Œæ— éœ€ hooks')
          this.SummaryItem('ç±»å‹ä¸¥æ ¼', 'ç¼–è¯‘æ—¶æ£€æŸ¥æ›´ä¸¥æ ¼ï¼Œä¸å…è®¸ any')
        }
      }
      .width('100%')
      .padding(12)
      .backgroundColor('#FFF7E6')
      .borderRadius(8)
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
  }

  // ==================== è¾…åŠ©ç»„ä»¶ ====================

  @Builder
  ComparisonItem(title: string, code: string) {
    Column({ space: 6 }) {
      Text(title)
        .fontSize(13)
        .fontWeight(FontWeight.Medium)

      Text(code)
        .fontSize(10)
        .fontFamily('monospace')
        .width('100%')
        .padding(10)
        .backgroundColor('#F8F8F8')
        .borderRadius(6)
    }
    .width('100%')
  }

  @Builder
  SummaryItem(key: string, value: string) {
    Row({ space: 8 }) {
      Text(key)
        .fontSize(13)
        .fontWeight(FontWeight.Medium)
        .fontColor('#007DFF')

      Text(value)
        .fontSize(12)
        .fontColor('#666')
        .layoutWeight(1)
    }
    .width('100%')
  }

  @Builder
  TipText(text: string) {
    Text(text)
      .fontSize(12)
      .fontColor('#FA8C16')
      .width('100%')
      .padding(8)
      .backgroundColor('#FFF7E6')
      .borderRadius(6)
  }

  @Builder
  BackButton() {
    Row() {
      Button('â† è¿”å›')
        .fontSize(14)
        .onClick(() => {
          router.back()
        })
    }
    .width('100%')
    .margin({ bottom: 10 })
  }

  aboutToAppear() {
    console.log('ArkTSSyntaxDemo aboutToAppear')
  }
}

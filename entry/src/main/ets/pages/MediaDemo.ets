import router from '@ohos.router'

/**
 * å›¾ç‰‡ä¸è§†é¢‘ç»„ä»¶æ¼”ç¤º
 * å±•ç¤º Imageã€Video ç­‰ç»„ä»¶çš„ç”¨æ³•
 */

@Entry
@Component
struct MediaDemo {
  @State currentFit: ImageFit = ImageFit.Cover

  build() {
    Scroll() {
      Column({ space: 20 }) {
        this.Header()

        // Image å›¾ç‰‡æ˜¾ç¤º
        this.ImageSection()

        // Image ç¼©æ”¾æ¨¡å¼
        this.ImageFitSection()

        this.TipCard('å›¾ç‰‡ä¸è§†é¢‘ç»„ä»¶è¦ç‚¹ï¼šæŒæ¡ä¸åŒæ¥æºçš„å›¾ç‰‡åŠ è½½å’Œè§†é¢‘æ’­æ”¾æ§åˆ¶')
      }
      .width('100%')
      .padding({ left: 16, right: 16, top: 20, bottom: 20 })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
  }

  @Builder
  Header() {
    Row() {
      Button() {
        Text('â†')
          .fontSize(20)
          .fontColor(Color.White)
      }
      .width(40)
      .height(40)
      .backgroundColor('#007DFF')
      .borderRadius(20)
      .onClick(() => {
        router.back()
      })

      Text('å›¾ç‰‡ä¸è§†é¢‘ç»„ä»¶')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)
        .layoutWeight(1)
        .textAlign(TextAlign.Center)
        .margin({ right: 40 })
    }
    .width('100%')
  }

  @Builder
  ImageSection() {
    Column({ space: 12 }) {
      Text('Image å›¾ç‰‡æ˜¾ç¤º')
        .fontSize(18)
        .fontWeight(FontWeight.Medium)
        .width('100%')

      // æœ¬åœ°å›¾ç‰‡
      Column({ space: 8 }) {
        Text('ç½‘ç»œå›¾ç‰‡')
          .fontSize(14)
          .fontColor('#666')

        Image('https://via.placeholder.com/300x150/007DFF/FFFFFF?text=Network+Image')
          .width('100%')
          .height(150)
          .borderRadius(8)
          .objectFit(ImageFit.Cover)
      }
      .width('100%')

      // Base64 å›¾ç‰‡
      Column({ space: 8 }) {
        Text('å ä½å›¾')
          .fontSize(14)
          .fontColor('#666')

        Text('ğŸ–¼ï¸')
          .fontSize(80)
          .width('100%')
          .textAlign(TextAlign.Center)
      }
      .width('100%')
      .padding(20)
      .backgroundColor('#F8F8F8')
      .borderRadius(8)
      .margin({ top: 12 })
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .shadow({ radius: 4, color: '#1F000000', offsetX: 0, offsetY: 2 })
  }

  @Builder
  ImageFitSection() {
    Column({ space: 12 }) {
      Text('Image objectFit ç¼©æ”¾æ¨¡å¼')
        .fontSize(18)
        .fontWeight(FontWeight.Medium)
        .width('100%')

      // ç¼©æ”¾æ¨¡å¼é€‰æ‹©
      Row({ space: 8 }) {
        Button('Cover')
          .fontSize(12)
          .backgroundColor(this.currentFit === ImageFit.Cover ? '#007DFF' : '#E6E6E6')
          .fontColor(this.currentFit === ImageFit.Cover ? Color.White : '#333333')
          .onClick(() => {
            this.currentFit = ImageFit.Cover
          })

        Button('Contain')
          .fontSize(12)
          .backgroundColor(this.currentFit === ImageFit.Contain ? '#007DFF' : '#E6E6E6')
          .fontColor(this.currentFit === ImageFit.Contain ? Color.White : '#333333')
          .onClick(() => {
            this.currentFit = ImageFit.Contain
          })

        Button('Fill')
          .fontSize(12)
          .backgroundColor(this.currentFit === ImageFit.Fill ? '#007DFF' : '#E6E6E6')
          .fontColor(this.currentFit === ImageFit.Fill ? Color.White : '#333333')
          .onClick(() => {
            this.currentFit = ImageFit.Fill
          })
      }
      .width('100%')
      .justifyContent(FlexAlign.Center)

      // ç¤ºä¾‹å›¾ç‰‡
      Column({ space: 8 }) {
        Text('å½“å‰æ¨¡å¼: ' + this.getImageFitName())
          .fontSize(14)
          .fontColor('#666')

        Text('ğŸ–¼ï¸')
          .fontSize(60)
          .width(200)
          .height(120)
          .textAlign(TextAlign.Center)
          .backgroundColor('#E6F7FF')
          .borderRadius(8)
      }
      .width('100%')
      .padding(20)
      .backgroundColor('#F8F8F8')
      .borderRadius(8)
      .margin({ top: 12 })
    }
    .width('100%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .shadow({ radius: 4, color: '#1F000000', offsetX: 0, offsetY: 2 })
  }

  private getImageFitName(): string {
    if (this.currentFit === ImageFit.Cover) {
      return 'Cover è¦†ç›–'
    } else if (this.currentFit === ImageFit.Contain) {
      return 'Contain åŒ…å«'
    } else {
      return 'Fill å¡«å……'
    }
  }

  @Builder
  TipCard(tip: string) {
    Text(tip)
      .fontSize(12)
      .fontColor('#FF6B6B')
      .width('100%')
      .padding(12)
      .backgroundColor('#FFF5F5')
      .borderRadius(8)
      .margin({ top: 10 })
  }
}
